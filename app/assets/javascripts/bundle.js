!function(e){function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="/js/",n(n.s=0)}([function(e,n,t){"use strict";document.addEventListener("DOMContentLoaded",function(){console.log("dom ready");var e=void 0;responsiveVoice.speak("Please state your symptoms.");!function(){$.ajax({method:"GET",url:"api/symptoms",success:function(n){e=n.symptoms}})}();var n=new window.webkitSpeechRecognition;n.lang="en-US",n.continuous=!0,n.interimResults=!0,n.onstart=function(){console.log("Speech recognition service has started")},n.onerror=function(e){console.error(e)},n.onend=function(){console.log("Speech recognition service disconnected")},n.onresult=function(e){for(var n="",t="",o=e.resultIndex;o<e.results.length;++o)e.results[o].isFinal?t+=e.results[o][0].transcript:n+=e.results[o][0].transcript;if(console.log("Interim: ",n),console.log("Final: ",t),console.log("final transcript is "+t)," add"===t||" add"===n){console.log("adding to symptoms");document.getElementById("symptom-add-btn").click()}else if(" submit"===t||" submit"===n){console.log("submitting form...");var s=document.getElementById("submit-btn");s.click()}else if(" yes"===t){console.log("answer is yes...");var i=document.getElementsByClassName("btn")[0];i.click()}else if(" no"===t){console.log("answer is no...");var r=document.getElementsByClassName("btn")[1];r.click()}else if(" don't know"===t){console.log("answer is don't know...");var a=document.getElementsByClassName("btn")[2];a.click()}else" clear"===t?$(".symptom-list").empty():""!==t&&$("#symptoms-input").val(t)},n.start();var t=function(e){i.most_likely_illness&&(e=e+"You might have a "+i.most_likely_illness),responsiveVoice.speak(e)},o=function(){$(".symptom-list").empty()};$("#symptom-clear-btn").on("click",o);var s=[],i=void 0,r=function(){var e=$("#symptoms-input").val(),n=document.createElement("p");n.innerHTML=e,document.getElementsByClassName("symptom-list")[0].appendChild(n),$("#symptoms-input").val("");var t=$("#sex-input").val(),o=$("#age-input").val(),s={symptoms:e,sex:t,age:o};return $.ajax({method:"POST",url:"api/symptoms",data:{query:s}})};$("#symptom-add-btn").on("click",function(){return r().then(function(e){console.log(e),s.push(e)})}),$("#submit-btn").on("click",function(){return a(s).then(function(e){return d()})});var a=function(e){var n=$("#sex-input").val(),t=$("#age-input").val(),o={symptoms:e,sex:n,age:t};return $.ajax({method:"POST",url:"api/diagnosis",data:{query:o},success:function(e){i=e}})},c=function(e){return $.ajax({method:"POST",url:"/api/responses",data:{diag:i,answer:e},success:function(e){i=e}})},l=function(e){var n=(e.name,e.id,document.getElementById("answer-container")),t=document.createElement("div");t.setAttribute("class","symptom"),n.appendChild(t);var o=document.createElement("div");o.setAttribute("class","btn-container"),e.choices.forEach(function(e){var t=document.createElement("button");t.setAttribute("class","btn"),o.appendChild(t),t.addEventListener("click",function(){c(e.id).then(function(){d()})}),t.innerHTML=e.label,n.appendChild(o)})},u=function(e){return $.ajax({method:"POST",url:"api/images",data:{disease:e}})},m=function(e){e=e.images;var n=document.getElementsByClassName("images-container")[0];e.forEach(function(e){var t=document.createElement("img");t.src=e.display_sizes[0].uri,n.appendChild(t)})},d=function(){u(i.most_likely_illness).then(function(e){return m(e)}),$("#answer-container").empty();var e=document.getElementById("response-container"),n=(document.getElementById("answer-container"),document.getElementById("illness-container")),o=i.response.question.items;o.forEach(function(e){l(e)}),console.log(o),e.innerHTML=i.response.question.text,t(i.response.question.text),n.innerHTML=i.most_likely_illness||""}})}]);